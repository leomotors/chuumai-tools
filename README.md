# Chuumai Tools

Collection of tools made by Chunithm and maimai players for Chunithm and maimai players.

## Chunithm

> [!NOTE]
> These tools are made for International Version (It may work for Japanese Version with some tweaks)

### Requirements

- [Docker](https://www.docker.com/)

### Simple Usage

```
docker run --rm \
 -v ./outputs:/app/outputs \
 -e USERNAME=YOUR_SEGA_ID \
 -e PASSWORD=YOUR_SEGA_PASSWORD \
 -e VERSION=VRS \
 -e TZ=Asia/Bangkok \
 -e LANG=th_TH.UTF-8 \
 ghcr.io/leomotors/chunithm-scraper:v4
```

You will have to change `USERNAME` and `PASSWORD` to your own,
`TZ` and `LANG` so that the image show timezone and time format correctly.

This basic command will scrape your data, saving to json in `outputs` folder (If you mount it correctly).  
To generate image, go to https://chuni.wonderhoy.me (My hosted instance of `apps/chuni-web`) and upload this JSON file.  
You can also add `-e IMAGE_GEN_URL=https://chuni.wonderhoy.me` to tell scraper to launch a playwright browser to generate on the website. The output image will be saved in `outputs` folder.

> [!WARNING]
> If you use Docker Desktop on Windows, when using `-v` option, make sure to start with `//` and use absolute path. For example: `-v //c/Users/username/outputs:/app/outputs`

### Hidden Songs

For example: Theatore Creatore ULTIMA (At the time of writing)

These songs don't appear on Chunithm-Net, therefore scraper won't be able to get these data, you have to manually input your score.

You can follow instructions on the website in case you choose to manually upload the JSON file. If you use scraper to generate the image, you have to mount `hidden.json` to `/app/hidden.json` using `-v ./hidden.json:/app/hidden.json:ro`, see [hidden.example.json](./apps/chunithm-scraper/hidden.example.json) for example.

### Advanced Usage

- Add `-e DISCORD_WEBHOOK_URL=your_webhook_url` to send the rendered image to Discord, or send screenshot if the scraper ran into error.
- Add `-e DATABASE_URL=postgres://USER:PASSWORD@HOST:PORT/DB` to save the scraped data into PostgreSQL database. You need to migrate database by cloning the repo and use `packages/db-chuni` (Seeding is not required).

- If you made your own scraper, the JSON schema for the website is `imgGenInputSchema` in `packages/types-chuni/src/index.ts`.

### Technical Details

packages:

- db-chuni: Database Schema
- types-chuni: Shared type and schema
- utils-chuni: Shared utils

apps:

- chuni-music: Seeding data into database and music jacket into S3
- chuni-web: Web for generating Music for Rating Image
- chunithm-scraper: Web scraper

### Demo

This image is generated by Docker Image (based on Debian)

![](images/demo.webp)

### Credits

Big thanks to [Qman](https://github.com/Qman11010101) for inspiration.

## maimai

todo, prob before PRiSM PLUS
